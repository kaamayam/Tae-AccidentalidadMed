library(rgdal)
library(leaflet)
library(tidyverse)

barrios_med=readOGR("../Barrios de Medellín/Barrio_Vereda.shp",layer="Barrio_Vereda")

print(barrios_med@data$NOMBRE)

library(stringi)
barrios_med@data$NOMBRE
barrios_med@data$NOMBRE<-tolower(barrios_med@data$NOMBRE)
barrios_med@data$NOMBRE<-stri_trans_general(barrios_med@data$NOMBRE,"Latin-ASCII")
barrios_med@data$NOMBRE<-gsub(x = barrios_med@data$NOMBRE,pattern = "ñ",replacement = "n")
nombres_barrios<-barrios_med@data$NOMBRE

m=leaflet(barrios_med)
m=addTiles(m)
m

m=addPolygons(m,popup=barrios_med@data$NOMBRE)
m=addTiles(conteos$n)
m

library(mapview)
barrios_med@data <- left_join(barrios_med@data, conteos, by= c("NOMBRE" = "BARRIO"))
barrios_med@data <- barrios_med@data[FECHA_ACCIDENTE=='2014-07-06',]
mapview()

merge(barrios_med@data, conteos, by.x = "first_names", by.y = "name", all.x = TRUE)
